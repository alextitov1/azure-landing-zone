parameters:
- name: backendBlobKey
  displayName: "Container blob key"
  type: string
  default: "terraform.tfstate"

steps:
  - task: TerraformCLI@0
    displayName: "TF init $(terraformFilesPath)"
    inputs:
      command: 'init'
      backendType: 'azurerm'
      backendServiceArm: $(backendServiceCon)
      backendAzureRmResourceGroupName: $(backendResourceGroup)
      backendAzureRmStorageAccountName: $(backendStorageAccount)
      backendAzureRmContainerName: $(backendContainerName)
      backendAzureRmKey: ${{ parameters.backendBlobKey }}
      allowTelemetryCollection: false
      workingDirectory: $(terraformFilesPath)